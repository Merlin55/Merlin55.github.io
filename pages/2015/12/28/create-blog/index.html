<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>User Classification Challenge on Shopping - Pengyang Wang's Homepage</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="/pages/2015/12/28/create-blog/">

        <meta name="author" content="Pengyang Wang" />
        <meta name="keywords" content="Bigdata,Challenge,Data Mining,Analytics" />
        <meta name="description" content="Shiting Xv and I participated in the competition as a team. My work mainly included data transforming, model design, algorithm implement. The competition was suported by Alibaba Group and BUPT ..." />

        <meta property="og:site_name" content="Pengyang Wang's Homepage" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="User Classification Challenge on Shopping"/>
        <meta property="og:url" content="/pages/2015/12/28/create-blog/"/>
        <meta property="og:description" content="Shiting Xv and I participated in the competition as a team. My work mainly included data transforming, model design, algorithm implement. The competition was suported by Alibaba Group and BUPT ..."/>
        <meta property="article:published_time" content="2015-12-28" />
            <meta property="article:section" content="Bigdata Challenge" />
            <meta property="article:tag" content="Bigdata" />
            <meta property="article:tag" content="Challenge" />
            <meta property="article:tag" content="Data Mining" />
            <meta property="article:tag" content="Analytics" />
            <meta property="article:author" content="Pengyang Wang" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>





</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
Pengyang Wang's Homepage            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="/category/bigdata-challenge.html">Bigdata challenge</a>
                        </li>
                        <li >
                            <a href="/category/projects.html">Projects</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-12">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/pages/2015/12/28/create-blog/"
                       rel="bookmark"
                       title="Permalink to User Classification Challenge on Shopping">
                        User Classification Challenge on Shopping
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2015-12-28T20:17:00+08:00"> Mon 28 December 2015</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="/tag/bigdata.html">Bigdata</a>
        /
	<a href="/tag/challenge.html">Challenge</a>
        /
	<a href="/tag/data-mining.html">Data Mining</a>
        /
	<a href="/tag/analytics.html">Analytics</a>
    <span class="label label-default">Lang</span>
	<a href="/pages/2015/10/12/create-blog/">en</a>
	<a href="/pages/2016/09/25/create-blog/">en</a>
	<a href="/pages/2014/04/12/create-blog/">en</a>
	<a href="/pages/2016/02/05/create-blog/">en</a>

</footer><!-- /.post-info -->                    </div>
                </div>
                <blockquote>
<p>Shiting Xv and I participated in the competition as a team. My work mainly included data transforming, model design, algorithm implement. The competition was suported by Alibaba Group and BUPT Data Mining Alliance. In the end, Our result ranked at 14 of 200+.
<br></p>
</blockquote>
<h3>Task</h3>
<p>The challenge required players to classify all the users into 12 categories based on users' behaviour logs.</p>
<h3>Data Desription</h3>
<p>The data, provided by Alibaba Group, contained different records of different users during a year. The detials of data are listed below.
<center><strong>Data Description</strong></center>
<table class="table table-bordered table-striped table-condensed">
   <tr>
      <td>Column</td>
      <td>Type</td>
      <td>Description</td>
      <td>Comment</td>
   </tr>
   <tr>
      <td>user_id</td>
      <td>int</td>
      <td>User ID</td>
      <td></td>
   </tr></p>
<p><tr>
      <td>item_id</td>
      <td>int</td>
      <td>Item Id</td>
      <td></td>
   </tr></p>
<p><tr>
      <td>cat_id</td>
      <td>int</td>
      <td>Category Id of The Item</td>
      <td></td>
   </tr></p>
<p><tr>
      <td>seller_id</td>
      <td>int</td>
      <td>Seller Id of The Item</td>
      <td></td>
   </tr></p>
<p><tr>
      <td>brand_id</td>
      <td>int</td>
      <td>Brand Id of The Item</td>
      <td></td>
   </tr></p>
<p><tr>
      <td>time_stamp</td>
      <td>int</td>
      <td>When The Action Occured</td>
      <td></td>
   </tr></p>
<p><tr>
      <td>action_type</td>
      <td>int</td>
      <td>Type Id of The Action</td>
      <td>0-Click, 1-Collect, 2-But, 3-Delete</td>
   </tr>
</table></p>
<h3>Evaluation</h3>
<p>The evaluation method is to calculate the precision rate of classification. The python version implement of the evaluation method can be downloaded <a href="/pages/2015/12/28/create-blog/files/python_evaluation_taobao_classification.py"><strong>HERE</strong></a>.</p>
<h3>Our Solution</h3>
<h4>1. Analysis</h4>
<p>When we looked through the data set, we found a pattern behind the it that the distrbution of actions varied by the time. For example, on the Double Eleven(like Black Friday in the U.S.), people used the online shopping site much more frequent than anytime else because almost all prodcts were on sale on that day. Also, people bought and check the website more on holidays than they did on week days, possibly because people had more time to spend on online shopping than other time. The distribution of actions in the data set are list below.
<center><img alt="statistics_user_classify" src="/image/statistics_user_classify.png" /></center>
From the graph above, we can see that at the beginning of the time, the number of actions is nearly zero. In the middle, the number of actions is relatively stable and basically small. However, at the end, the number increases sharply to the top.</p>
<h4>2. Model Design</h4>
<h5>2.1 Spliting the Data Set by Time Window</h5>
<p>Due to the pattern I just have discussed above, I descided to split the data set into small pieces. Here, based on time, the denser the data set was, the smaller the data set was splited into, vice versa.</p>
<p>In the end, the data set was splited into 7 parts.</p>
<h5>2.2 Clustering on Items</h5>
<p>The task is to classify users and action records are pointed at items from users. So, I moved on items. The details of items in data set are cat_id, seller_id and brand_id which represent the category id of ihe item, seller id of the item and the brand id of the item respectively. To make the role of items more clear, I clustered items in 14 categories. Here are process</p>
<ul>
<li>Count the number m of actions that every user who have done actions on the item.</li>
<li>Count the total number n of actions which the item have been interacted.</li>
<li>Caculate the ratio r = m / n.</li>
<li>Transfer cat_id, seller_id and brand_id of the item into vectors in TF-IDF.</li>
<li>Integrate the ratio and the TF-IDF vector into a vector to represent a item.</li>
<li>Cluster items in 14 categories with K-means algorithm.
<center><img alt="cluster_compet" src="/image/cluster_compet.png" /></center></li>
</ul>
<h5>2.3 The Representation of Users</h5>
<p>In the section of clustering items, I constructed the item vector with users. In constructing users, I used the categories information of items in return. </p>
<ul>
<li>Count the number m of actions that every user who have done actions on the category of items .</li>
</ul>
<p>Since there were 14 categories of items, the users were represented in 14 dimensions on items domain in a single time window. Then, I put the action type into the vector and we had a 15 dimensions in a single time window.
Finally, I put all 15 dimensions vectors from all time windows in a vector.
<center><img alt="vector_final_compet" src="/image/vector_final_compet.png" /></center></p>
<h5>2.4 Training Model</h5>
<p>We applied descision trees and Adaboosting algorithm to train the data. Here, we totally used 5 descision trees. The precision rate was 34% and the result ranked at 14. </p>
<blockquote>
<p>All the code of the model and algorithm can be found <a href="https://github.com/oceansea1911/ali_competition"><strong>HERE</strong></a>.</p>
</blockquote>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Pengyang Wang
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>


</body>
</html>